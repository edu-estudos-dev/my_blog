<!DOCTYPE html>
<html lang="pt-br">
<%- include('../partials/head', { title: 'Tabela de Artigos' }) %>
    <%- include('../partials/nav-bar') %>

        <div class="container mt-5">
            <h3 class="text-center bg-dark text-white py-2">Artigos</h3>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Id</th>
                        <th scope="col">Título</th>
                        <th scope="col">Slug</th>
                        <th scope="col">Categoria</th>
                        <th scope="col">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <% articles.forEach(article=> { %>
                        <tr>
                            <td class="py-1">
                                <%= article.id %>
                            </td>
                            <td class="py-1">
                                <%= article.title %>
                            </td>
                            <td class="py-1">
                                <%= article.slug %>
                            </td>
                            <td class="py-1">
                                <%= article.category.title %>
                            </td>
                            <td class="py-1">
                                <a href="/articles/formEditarticle/<%= article.id %>"
                                    class="btn btn-warning py-0 ms-2">Editar</a>
                                <form action="/articles/<%= article.id %>?_method=DELETE" method="POST"
                                    style="display: inline;" onsubmit="return confirmDelete(event, this)">
                                    <button type="submit" class="btn btn-danger py-0 ms-2">Excluir</button>
                                </form>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
        </div>

        <%- include('../partials/footer') %>

            <script>
                function confirmDelete(event, form) {
                    event.preventDefault();
                    const isConfirmed = confirm("Tem certeza que deseja deletar esse artigo?");
                    if (isConfirmed) {
                        form.submit();
                        alert("Artigo excluido com Sucesso.");
                    }
                }
            </script>

</html>